<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>뉴스 게시판</title>
  <style>
    .navbar {
      background-color: #333;
      overflow: hidden;
    }
    .navbar a {
      float: left;
      display: block;
      color: white;
      text-align: center;
      padding: 14px 20px;
      text-decoration: none;
    }
    .navbar a:hover {
      background-color: #575757;
    }
    .post {
      border-bottom: 1px solid #ccc;
      padding: 10px;
    }
    .comment {
      margin-left: 20px;
      font-size: 14px;
      color: #555;
    }
  </style>
</head>
<body>
  <!-- 네비게이션 바 -->
  <div class="navbar">
    <a href="news.html">뉴스 게시판</a>
    <a href="free.html">자유 게시판</a>
    <a href="index.html">홈</a>
  </div>

  <h1>뉴스 게시판</h1>
  <button onclick="showForm()">글쓰기</button>
  <div id="formArea" style="display:none; margin-top:10px;">
    <input type="text" id="author" placeholder="작성자 이름"><br><br>
    <input type="text" id="title" placeholder="제목"><br><br>
    <textarea id="content" placeholder="내용 작성" rows="5" cols="40"></textarea><br><br>
    <button onclick="addPost()">저장</button>
  </div>

  <h2>게시글 목록</h2>
  <div id="postList"></div>

  <script>
    let posts = JSON.parse(localStorage.getItem("newsPosts")) || [];

    function showForm() {
      document.getElementById("formArea").style.display = "block";
    }

    function addPost() {
      let author = document.getElementById("author").value;
      let title = document.getElementById("title").value;
      let content = document.getElementById("content").value;

      if (!author || !title || !content) {
        alert("작성자, 제목, 내용을 모두 입력하세요.");
        return;
      }

      let newPost = {
        id: Date.now(),
        author: author,
        title: title,
        content: content,
        comments: []
      };

      posts.push(newPost);
      localStorage.setItem("newsPosts", JSON.stringify(posts));

      document.getElementById("author").value = "";
      document.getElementById("title").value = "";
      document.getElementById("content").value = "";
      document.getElementById("formArea").style.display = "none";

      renderPosts();
    }

    function renderPosts() {
      let postList = document.getElementById("postList");
      postList.innerHTML = "";

      posts.forEach(post => {
        let div = document.createElement("div");
        div.className = "post";
        div.innerHTML = `<strong>[${post.author}]</strong> <a href="#" onclick="viewPost(${post.id})">${post.title}</a>`;
        postList.appendChild(div);
      });
    }

    function viewPost(id) {
      let post = posts.find(p => p.id === id);
      if (!post) return;

      let postList = document.getElementById("postList");
      postList.innerHTML = `
        <h2>${post.title}</h2>
        <p><strong>작성자:</strong> ${post.author}</p>
        <p>${post.content}</p>
        <h3>댓글</h3>
        <div id="commentList"></div>
        <input type="text" id="commentAuthor" placeholder="댓글 작성자">
        <input type="text" id="commentInput" placeholder="댓글 내용">
        <button onclick="addComment(${post.id})">댓글 달기</button>
        <br><br>
        <button onclick="renderPosts()">← 목록으로 돌아가기</button>
      `;

      renderComments(post);
    }

    function addComment(postId) {
      let commentAuthor = document.getElementById("commentAuthor").value;
      let commentText = document.getElementById("commentInput").value;

      if (!commentAuthor || !commentText) {
        alert("댓글 작성자와 내용을 모두 입력하세요.");
        return;
      }

      let post = posts.find(p => p.id === postId);
      post.comments.push({ author: commentAuthor, text: commentText });

      localStorage.setItem("newsPosts", JSON.stringify(posts));

      viewPost(postId);
    }

    function renderComments(post) {
      let commentList = document.getElementById("commentList");
      commentList.innerHTML = "";
      post.comments.forEach(c => {
        let div = document.createElement("div");
        div.className = "comment";
        div.textContent = `[${c.author}] ${c.text}`;
        commentList.appendChild(div);
      });
    }

    // 페이지 로드 시 기존 글 불러오기
    renderPosts();
  </script>
</body>
</html>
